<!DOCTYPE html>
<html lang="en">

<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <link href="../css/style.css" rel="stylesheet">
        <link href="../list-product/list-product-style.css" rel="stylesheet">
        <link href="../buyer-dashboard/buyer-dashboard-style.css" rel="stylesheet">
        
        
    </head>

    <body>
        <div class="clsBorder" style="margin-top: 150px;">
            <div class="div2">
                <div>
                    <h1 style="padding-top: 10px; padding-bottom: 10px; padding-left: 15px;">1. Item Details</h1>
                </div> 
            </div>

            <div class="clsFrm1">
                <div class="cls1">
                    <label for="itemname" style="padding-right: 10px;">Item Name *</label><br>
                    <input type="text" id="itemname" placeholder="Enter item name"><br>
                </div>
                <br>

                <br>

                <div class="cls2">
                    <label for="category">Category *</label><br><br>
                    
                    <input type="checkbox" id="livingroom" name="livingroom" value="Living Room">
                    <label for="livingroom">Living Room</label>

                    <input type="checkbox" id="dining" name="dining" value="Dining" style="margin-left: 40px;">
                    <label for="dining">Dining</label>

                    <input type="checkbox" id="bedroom" name="bedroom" value="Bedroom" style="margin-left: 40px;">
                    <label for="bedroom">Bedroom</label>

                    <input type="checkbox" id="office" name="office" value="Office" style="margin-left: 40px;">
                    <label for="office">Office</label>

                    <input type="checkbox" id="outdoor" name="outdoor" value="Outdoor" style="margin-left: 40px;">
                    <label for="outdoor">Outdoor</label>

                    <input type="checkbox" id="other" name="other" value="Other" style="margin-left: 40px;">
                    <label for="other">Other</label>
                </div>
                <br>

                <div class="cls1">
                    <label for="condition" style="padding-right: 10px;">Condition *</label><br>
                    <input type="text" id="condition" placeholder="Enter item condition  (e.g. - Brandnew, used, ....)"><br>
                </div>
                <br>

                <div class="cls1">
                    <label for="description" style="padding-right: 10px;">Description *</label><br>
                    <textarea id="description" id="description" rows="4" cols="50" placeholder="Enter item description"></textarea>
                </div>
                <br>

                <div class="cls1">
                    <label for="dimensions" style="padding-right: 10px;">Dimensions *</label><br>
                    <textarea id="dimensions" id="dimensions" rows="4" cols="50" placeholder="Enter item dimensions"></textarea>
                </div>
                <br>

                <div class="cls1">
                    <label for="stock" style="padding-right: 10px;">Quantity in Stock *</label><br>
                    <input type="text" id="stock" placeholder="Enter quantity in stock" style="width: 89.5%;">
                    <button class="btn btn-primary profile-button" type="button" style="font-size: large; padding-top: 10px; padding-bottom: 10px; padding-left: 13px; padding-right: 13px; margin-left: 20px;" onclick="inc()"> + </button>
                    <button class="btn btn-primary profile-button" type="button" style="font-size: large; padding-top: 10px; padding-bottom: 10px; padding-left: 15px; padding-right: 15px; margin-left: 20px;" onclick="dec()"> - </button>
                </div>
                <br>

                <div class="cls1">
                    <label for="price" style="padding-right: 10px;">Price (LKR) *</label><br>
                    <input type="text" id="price" placeholder="Enter item price"><br>
                </div>
                <br>

                <div class="cls1">
                    <label for="delivery" style="padding-right: 10px;">Delivery Fee (LKR) *</label><br>
                    <input type="text" id="delivery" placeholder="Enter delivery fee"><br>
                </div>
                <br>

                <div class="cls1">
                    <label for="arrival" style="padding-right: 10px;">Estimated Arrival (days) *</label><br>
                    <input type="text" id="arrival" placeholder="Enter estimated arrival days" style="width: 89.5%;">
                    <button class="btn btn-primary profile-button" type="button" style="font-size: large; padding-top: 10px; padding-bottom: 10px; padding-left: 13px; padding-right: 13px; margin-left: 20px;" onclick="incD()"> + </button>
                    <button class="btn btn-primary profile-button" type="button" style="font-size: large; padding-top: 10px; padding-bottom: 10px; padding-left: 15px; padding-right: 15px; margin-left: 20px;" onclick="decD()"> - </button>
                </div>
            </div>
        </div>

        <div class="clsBorder" style="margin-top: 100px;">
            <div class="div2">
                <div>
                    <h1 style="padding-top: 10px; padding-bottom: 10px; padding-left: 15px;">2. Material Details</h1>
                </div> 
            </div>

            <div class="clsFrm1">
                <div class="cls1">
                    <label for="material" style="padding-right: 10px;">Material *</label><br>
                    <input type="text" id="material" placeholder="Enter item material"><br>
                </div>
                <br>

                <div class="cls1">
                    <label for="clr1" style="padding-right: 10px;">Material Color Code 1 *</label><br>
                    <input type="text" id="clr1" placeholder="Enter item material color code 1 (e.g. - #FFFFFF)"><br>
                </div>
                <br>

                <div class="cls1">
                    <label style="padding-right: 10px;">Color 1 item image *</label><br><br>
                    <img id="clr1Img" src="../../../../../Resources/istockphoto-1357365823-612x612.jpg" width="306" height="229.5">
                    <input type="file" id="clr1ImgInput">
                </div>
                <br>

                <div class="cls1">
                    <label for="clr2" style="padding-right: 10px;">Material Color Code 2</label><br>
                    <input type="text" id="clr2" placeholder="Enter item material color code 2 (e.g. - #FFFFFF)"><br>
                </div>
                <br>

                <div class="cls1">
                    <label style="padding-right: 10px;">Color 2 item image</label><br><br>
                    <img id="clr2Img" src="../../../../../Resources/istockphoto-1357365823-612x612.jpg" width="306" height="229.5">
                    <input type="file" id="clr2ImgInput">
                </div>
                <br>

                <div class="cls1">
                    <label for="clr3" style="padding-right: 10px;">Material Color Code 3</label><br>
                    <input type="text" id="clr3" placeholder="Enter item material color code 3 (e.g. - #FFFFFF)"><br>
                </div>
                <br>

                <div class="cls1">
                    <label style="padding-right: 10px;">Color 3 item image</label><br><br>
                    <img id="clr3Img" src="../../../../../Resources/istockphoto-1357365823-612x612.jpg" width="306" height="229.5">
                    <input type="file" id="clr3ImgInput">
                </div>
                <br>
            </div>
        </div>


        <div class="clsBorder" style="margin-top: 100px;">
            <div class="div2">
                <div>
                    <h1 style="padding-top: 10px; padding-bottom: 10px; padding-left: 15px;">3. Additional Graphics</h1>
                </div> 
            </div>

            <div class="clsFrm1">
                <div class="cls1">
                    <label style="padding-right: 10px;">Additional Image 1 *</label><br><br>
                    <img id="add1Img" src="../../../../../Resources/istockphoto-1357365823-612x612.jpg" width="306" height="229.5">
                    <input type="file" id="add1ImgInput">
                </div>
                <br>

                <div class="cls1">
                    <label style="padding-right: 10px;">Additional Image 2</label><br><br>
                    <img id="add2Img" src="../../../../../Resources/istockphoto-1357365823-612x612.jpg" width="306" height="229.5">
                    <input type="file" id="add2ImgInput">
                </div>
                <br>

                <div class="cls1">
                    <label style="padding-right: 10px;">Video 1</label><br><br>
                    <video id="vid1" width="320" height="240" controls>
                        <source id="mp4_src1" src="" type="video/mp4">
                    </video>
                    <input type="file" id="vid1Input" class="form-control">
                </div>
                <br>
                
            </div>
        </div>

        <br><br><br>
        <div class="mt-5 text-right" style="display: flex; justify-content: right">
            <button class="btn btn-primary profile-button" type="button" style="font-size: large; padding: 10px;" onclick="updateProduct()">Update Product</button>
        </div>


        <script>
            // Upload Color 1 Image
            const clr1ImgInput = document.getElementById("clr1ImgInput");
            
            clr1ImgInput.addEventListener("change", e=> {
                const file = clr1ImgInput.files[0];
                const reader = new FileReader();

                reader.addEventListener("load", () => {
                    document.getElementById("clr1Img").src = reader.result;
                });

                reader.readAsDataURL(file);
            });


            // Upload Color 2 Image
            const clr2ImgInput = document.getElementById("clr2ImgInput");
            
            clr2ImgInput.addEventListener("change", e=> {
                const file = clr2ImgInput.files[0];
                const reader = new FileReader();

                reader.addEventListener("load", () => {
                    document.getElementById("clr2Img").src = reader.result;
                });

                reader.readAsDataURL(file);
            });


            // Upload Color 3 Image
            const clr3ImgInput = document.getElementById("clr3ImgInput");
            
            clr3ImgInput.addEventListener("change", e=> {
                const file = clr3ImgInput.files[0];
                const reader = new FileReader();

                reader.addEventListener("load", () => {
                    document.getElementById("clr3Img").src = reader.result;
                });

                reader.readAsDataURL(file);
            });

            // Upload Additional Image 1
            const add1ImgInput = document.getElementById("add1ImgInput");
            
            add1ImgInput.addEventListener("change", e=> {
                const file = add1ImgInput.files[0];
                const reader = new FileReader();

                reader.addEventListener("load", () => {
                    document.getElementById("add1Img").src = reader.result;
                });

                reader.readAsDataURL(file);
            });

            // Upload Additional Image 2
            const add2ImgInput = document.getElementById("add2ImgInput");
            
            add2ImgInput.addEventListener("change", e=> {
                const file = add2ImgInput.files[0];
                const reader = new FileReader();

                reader.addEventListener("load", () => {
                    document.getElementById("add2Img").src = reader.result;
                });

                reader.readAsDataURL(file);
            });

            // Upload Video 1
            const vid1 = document.getElementById("vid1");
            const vid1Input = document.getElementById("vid1Input");
            
            vid1Input.addEventListener("change", e=> {
                const file = vid1Input.files[0];
                const fileName = file.name;
                extension = fileName.split('.').pop();
                
                const reader = new FileReader();

                reader.addEventListener("load", () => {
                    if(extension == "mp4"){
                        vid1.src = reader.result;
                        vid1.load();
                    }else{
                        alert("Only MP4 videos are allowed!");
                    }
                });

                reader.readAsDataURL(file);
            });


            // Code related to setting page details
            var id = localStorage.getItem("id");
            var itemId = localStorage.getItem("itemId");

            const setPageDetails = async() => {
                let response1 = await fetch(`http://localhost:8080/findUserProducts/${id}`);
			    let items = await response1.json();

                for (let i = 0; i < items.length; i++) {
                    if(items[i].itemId == itemId){
                        document.getElementById("itemname").value = items[i].itemName;

                        if(items[i].living == "true"){
                            document.getElementById("livingroom").checked = true;
                        }

                        if(items[i].dining == "true"){
                            document.getElementById("dining").checked = true;
                        }

                        if(items[i].bedroom == "true"){
                            document.getElementById("bedroom").checked = true;
                        }

                        if(items[i].office == "true"){
                            document.getElementById("office").checked = true;
                        }

                        if(items[i].outdoor == "true"){
                            document.getElementById("outdoor").checked = true;
                        }

                        if(items[i].other == "true"){
                            document.getElementById("other").checked = true;
                        }

                        document.getElementById("condition").value = items[i].condition;
                        document.getElementById("description").value = items[i].description;
                        document.getElementById("dimensions").value = items[i].dimensions;
                        document.getElementById("stock").value = items[i].stockQuantity;
                        document.getElementById("price").value = items[i].price;
                        document.getElementById("delivery").value = items[i].deliveryFee;
                        document.getElementById("arrival").value = items[i].arrivalDays;
                        document.getElementById("material").value = items[i].material;
                        document.getElementById("clr1").value = items[i].clr1;
                        document.getElementById("clr1Img").src = items[i].clr1Img;

                        if(items[i].clr2 != ""){
                            document.getElementById("clr2").value = items[i].clr2;
                            document.getElementById("clr2Img").src = items[i].clr2Img;
                        }

                        if(items[i].clr3 != ""){
                            document.getElementById("clr3").value = items[i].clr3;
                            document.getElementById("clr3Img").src = items[i].clr3Img;
                        }

                        document.getElementById("add1Img").src = items[i].add1Img;

                        if(items[i].add2Img != "NA"){
                            document.getElementById("add2Img").src = items[i].add2Img;
                        }

                        if(items[i].vid1 != "NA"){
                            document.getElementById("vid1").src = items[i].vid1;
                        }

                        break;
                    }
                }
            }

            setPageDetails();

            function inc(){
                document.getElementById("stock").value = Number(document.getElementById("stock").value) + 1;
            }

            function dec(){
                document.getElementById("stock").value = Number(document.getElementById("stock").value) - 1;
            }

            function incD(){
                document.getElementById("arrival").value = Number(document.getElementById("arrival").value) + 1;
            }

            function decD(){
                document.getElementById("arrival").value = Number(document.getElementById("arrival").value) - 1;
            }

        </script>
    </body>

</html>
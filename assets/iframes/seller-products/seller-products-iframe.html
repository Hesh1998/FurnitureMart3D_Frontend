<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
	<link href="../css/responsive.css" rel="stylesheet">
    <link href="../buyer-dashboard/buyer-dashboard-style.css" rel="stylesheet">
</head>

<body>
	<section id="cart_items" style="margin-top: 180px;">
		<div class="container">
			<div class="table-responsive cart_info">
				<table class="table table-condensed">
					<thead>
						<tr class="cart_menu">
							<td class="image">Product</td>
							<td class="description"></td>
							<td class="price">In Stock</td>
							<td class="quantity">Total Sold</td>
							<td class="total"></td>
							<td></td>
						</tr>
					</thead>
					<tbody id="items_table">
						
					</tbody>
				</table>

                
			</div>

            <div class="mt-5 text-right">
                <button class="btn btn-primary profile-button" type="button" style="font-size: large;" onclick="listProduct()">List a Product</button>
            </div>
		</div>

        
	</section>

    

	<script src="../js/bootstrap.min.js"></script>
    <script>
        // List product button
		const listProduct = async() => {
            open("../../../list-product.html", "_blank")
        }
		

		// Set page details
		var id = localStorage.getItem("id");
		const setPageDetails = async() => {
			let response1 = await fetch(`http://localhost:8080/findUserProducts/${id}`);
			let items = await response1.json();
			var items_table = document.getElementById("items_table");
			if(items.length == 0){
				items_table.innerHTML = '<tr> <td class="cart_product"> <h3>No items listed yet !</h3> </td> </tr>';
			}else{
				var in_html = "";
				for (let i = 0; i < items.length; i++) {
					in_html += `<tr> <td class="cart_product"> <img src=${items[i].clr1Img} alt="" width="150px" height="100px"> </td> <td class="cart_description"> <h4>${items[i].itemName}</h4> <p>LKR ${items[i].price}</p> </td> <td class="cart_price"> <p>${items[i].stockQuantity}</p> </td> <td class="cart_price"> <p>0</p> </td> <td class="cart_total"> <a href=""><p class="cart_total_price">View / Edit</p></a> <br> <a href=""><p class="cart_total_price">Delete</p></a> </td> </tr>`;
				}
				items_table.innerHTML = in_html;
			}
		}

		setPageDetails();
    </script>
</body>
</html>